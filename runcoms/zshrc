#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

if [[ -d "${HOME}/.gem/ruby/2.0.0/bin" ]]; then
  export PATH="${PATH}:${HOME}/.gem/ruby/2.0.0/bin"
fi
# Customize to your needs...

# use comments in command line
setopt interactivecomments

# disable "file exists" warning with redirection
setopt clobber

# don't share history
unsetopt SHARE_HISTORY

# disable color diff output
unfunction diff

# editor and pager
export EDITOR="/usr/bin/vim"
export VISUAL=${EDITOR}
export PAGER="/usr/bin/vimpager"
export VMAIL_HTML_PART_READER="enconv | w3m -dump -T text/html"
export LIBVIRT_DEFAULT_URI="qemu:///system"
export MPD_HOST="/home/fedotov_sv/.mpd/socket"

# aliases
alias mailsql="${EDITOR} +8 ${HOME}/mail.sql"
alias coub_weekly="xdg-open http://coub.com/weekly/$(date +%Y)/$(expr $(date +%U) - 1)"
alias less=${PAGER}
alias zless=${PAGER}
alias mc='/usr/bin/ranger'
alias fuck='eval $(thefuck $(fc -ln -1))'
alias mplayer='/usr/bin/mpv'
alias wgetcover='wget $1 -O cover.jpg'

# bind backward search key "CTRL+?" (next occurence)
bindkey -M viins "^_" history-incremental-search-backward
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
unset GREP_OPTIONS

# completion for server-status.sh
compdef _hosts server-status.sh

# modify prompt to indicate ranger parent session
PROMPT='${SSH_TTY:+"%F{9}%n%f%F{7}@%f%F{3}%m%f "}%F{green}${RANGER_LEVEL:+"RANGER "}%F{4}${_prompt_sorin_pwd}%(!. %B%F{1}#%f%b.)${editor_info[keymap]} '
